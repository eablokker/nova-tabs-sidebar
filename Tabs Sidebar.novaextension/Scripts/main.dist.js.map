{"version":3,"file":"main.dist.js","sources":["../../src/main.ts"],"sourcesContent":["let treeView: TreeView<TabItem | FolderItem | null>;\nlet tabDataProvider: TabDataProvider;\nlet focusedTab: TabItem | undefined;\nlet openTabWhenFocusSidebar = true;\n\n// Config vars\nlet openOnSingleClick = nova.config.get('eablokker.tabs-sidebar.open-on-single-click', 'boolean');\nlet alwaysShowParentFolder = nova.config.get('eablokker.tabs-sidebar.always-show-parent-folder', 'boolean');\nlet showGroupCount = nova.config.get('eablokker.tabs-sidebar.show-group-count', 'boolean');\n\nlet unsavedSymbol = nova.config.get('eablokker.tabs-sidebar.unsaved-symbol', 'string');\nlet unsavedSymbolLocation = nova.config.get('eablokker.tabs-sidebar.unsaved-symbol-location', 'string');\n\nlet groupByKind = nova.workspace.config.get('eablokker.tabsSidebar.config.groupByKind', 'boolean');\nconst customTabOrder = nova.workspace.config.get('eablokker.tabsSidebar.config.customTabOrder', 'array');\n\nconst syntaxnames = {\n\t'plaintext': nova.localize('Plain Text'),\n\t'coffeescript': 'CoffeeScript',\n\t'css': 'CSS',\n\t'diff': 'Diff',\n\t'erb': 'ERB',\n\t'haml': 'Haml',\n\t'html': 'HTML',\n\t'ini': 'INI',\n\t'javascript': 'JavaScript',\n\t'json': 'JSON',\n\t'jsx': 'JSX',\n\t'less': 'Less',\n\t'lua': 'Lua',\n\t'markdown': 'Markdown',\n\t'perl': 'Perl',\n\t'php': 'PHP-HTML',\n\t'python': 'Python',\n\t'ruby': 'Ruby',\n\t'sass': 'Sass',\n\t'scss': 'SCSS',\n\t'shell': 'Shell Script',\n\t'smarty': 'Smarty',\n\t'sql': 'SQL',\n\t'tsx': 'TSX',\n\t'twig': 'Twig-HTML',\n\t'twig-markdown': 'Twig-Markdown',\n\t'typescript': 'TypeScript',\n\t'vue': 'Vue',\n\t'xml': 'XML',\n\t'yaml': 'YAML'\n};\n\nconst openRemoteTab = (uri: string): Promise<TextEditor> => {\n\treturn new Promise((resolve, reject) => {\n\t\tconst element = tabDataProvider.getElementByUri(uri);\n\n\t\tif (!element) {\n\t\t\tconsole.warn('No tab element found for uri ' + uri);\n\t\t\treturn;\n\t\t}\n\n\t\tlet basename = nova.path.basename(element.uri);\n\t\tlet parentPath = '';\n\t\tconst isUnique = tabDataProvider.isUniqueName(element);\n\n\t\t// Differentiate remote file by common parent path\n\t\tif (!isUnique) {\n\t\t\tconst commonBasePath = tabDataProvider.getCommonBasePath(element);\n\t\t\tparentPath = decodeURI(nova.path.dirname(element.uri).substring(commonBasePath.length));\n\t\t}\n\n\t\tif (parentPath.length) {\n\t\t\tbasename += ' – ' + parentPath;\n\t\t}\n\n\t\ttabDataProvider\n\t\t\t.runProcess(__dirname + '/click_project_item_by_name.sh', [nova.localize('Window'), basename])\n\t\t\t.then(() => {\n\t\t\t\t// console.log('Menu item ' + basename + ' of Window menu clicked');\n\t\t\t\tconst editor = nova.workspace.activeTextEditor;\n\t\t\t\tresolve(editor);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error('Could not click project item by filename.', err);\n\t\t\t\treject(err);\n\t\t\t});\n\t});\n};\n\nexports.activate = function() {\n\t// Do work when the extension is activated\n\n\t// Create the TreeView\n\ttabDataProvider = new TabDataProvider();\n\ttreeView = new TreeView('tabs-sidebar', {\n\t\tdataProvider: tabDataProvider\n\t});\n\n\t// Make shell scripts executable on activation\n\tconst shellScriptPaths = [\n\t\t'/click_menu_item.sh',\n\t\t'/click_project_item_by_name.sh',\n\t\t'/list_menu_items.sh'\n\t];\n\n\tshellScriptPaths.forEach(path => {\n\t\tconst scriptExists = nova.fs.access(__dirname + path, nova.fs.constants.F_OK);\n\n\t\tif (!scriptExists) {\n\t\t\tconsole.error('Shell script not found', __dirname + path);\n\t\t\treturn;\n\t\t}\n\n\t\tconst scriptIsExecutable = nova.fs.access(__dirname + path, nova.fs.constants.X_OK);\n\n\t\tif (scriptExists && !scriptIsExecutable) {\n\t\t\ttabDataProvider\n\t\t\t\t.runProcess('/bin/chmod', ['744', __dirname + path])\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (nova.inDevMode()) console.log('Shell script ' + path + ' changed to 744');\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t});\n\t\t}\n\t});\n\n\t// Watch for config changes\n\tnova.config.onDidChange('eablokker.tabs-sidebar.open-on-single-click', (newVal: boolean, oldVal: boolean) => {\n\t\topenOnSingleClick = newVal;\n\t});\n\n\tnova.config.onDidChange('eablokker.tabs-sidebar.always-show-parent-folder', (newVal: boolean, oldVal: boolean) => {\n\t\talwaysShowParentFolder = newVal;\n\n\t\ttreeView.reload();\n\t});\n\n\tnova.config.onDidChange('eablokker.tabs-sidebar.show-group-count', (newVal: boolean, oldVal: boolean) => {\n\t\tshowGroupCount = newVal;\n\n\t\ttabDataProvider.sortItems();\n\t\ttreeView.reload();\n\t});\n\n\tnova.config.onDidChange('eablokker.tabs-sidebar.unsaved-symbol', (newVal: string, oldVal: string) => {\n\t\tunsavedSymbol = newVal;\n\n\t\ttreeView.reload();\n\t});\n\n\tnova.config.onDidChange('eablokker.tabs-sidebar.unsaved-symbol-location', (newVal: string, oldVal: string) => {\n\t\tunsavedSymbolLocation = newVal;\n\n\t\ttreeView.reload();\n\t});\n\n\tnova.workspace.config.onDidChange('eablokker.tabsSidebar.config.groupByKind', (newVal: boolean, oldVal: boolean) => {\n\t\tgroupByKind = newVal;\n\n\t\ttabDataProvider.setGroupByKind(groupByKind);\n\t\ttreeView.reload();\n\t});\n\n\t// Initially sort by tabs bar order\n\t//nova.commands.invoke('tabs-sidebar.cleanUpByTabBarOrder');\n\n\t// Prevent excessive reloading\n\tlet reloadTimeoutID = setTimeout(() => {\n\t\t//\n\t});\n\n\tnova.workspace.onDidAddTextEditor(editor => {\n\t\t//console.log('Document opened');\n\n\t\tclearTimeout(reloadTimeoutID);\n\t\treloadTimeoutID = setTimeout(() => {\n\t\t\tlet reload;\n\t\t\tconst folder = tabDataProvider.getFolderBySyntax(editor.document.syntax || 'plaintext');\n\n\t\t\ttabDataProvider.loadData(nova.workspace.textDocuments, focusedTab);\n\n\t\t\tif (folder && groupByKind) {\n\t\t\t\treload = treeView.reload(folder);\n\t\t\t} else {\n\t\t\t\treload = treeView.reload();\n\t\t\t}\n\n\t\t\treload\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Focus tab in sidebar\n\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(editor.document.uri);\n\t\t\t\t\t//treeView.reveal(focusedTab, { focus: true });\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('Could not reload treeView.', err);\n\t\t\t\t});\n\t\t}, 1);\n\n\t\t// Remove tab from sidebar when editor closed\n\t\teditor.onDidDestroy(destroyedEditor => {\n\t\t\t//console.log('Document closed');\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tlet reload;\n\t\t\t\tconst folder = tabDataProvider.getFolderBySyntax(destroyedEditor.document.syntax || 'plaintext');\n\n\t\t\t\tif (folder && folder.children.length > 1 && groupByKind) {\n\t\t\t\t\treload = treeView.reload(folder);\n\t\t\t\t} else {\n\t\t\t\t\treload = treeView.reload();\n\t\t\t\t}\n\n\t\t\t\ttabDataProvider.loadData(nova.workspace.textDocuments);\n\n\t\t\t\treload\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconst document = nova.workspace.activeTextEditor ? nova.workspace.activeTextEditor.document : null;\n\n\t\t\t\t\t\tif (document) {\n\t\t\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(document.uri);\n\t\t\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('Could not reload treeView.', err);\n\t\t\t\t\t});\n\t\t\t}, 1);\n\t\t});\n\n\t\t// Focus tab in sidebar when clicking in document\n\t\teditor.onDidChangeSelection(changedEditor => {\n\t\t\t// if (nova.inDevMode()) console.log('editor.onDidChangeSelection');\n\n\t\t\tconst selection = treeView.selection[0];\n\t\t\tconst document = changedEditor.document;\n\n\t\t\t// Don't reveal in treeview if it's already selected\n\t\t\tif (selection && selection.uri === document.uri) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfocusedTab = tabDataProvider.getElementByUri(changedEditor.document.uri);\n\t\t\topenTabWhenFocusSidebar = false;\n\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t});\n\n\t\teditor.onDidStopChanging(changedEditor => {\n\t\t\t//console.log('Document stopped changing');\n\n\t\t\tfocusedTab = tabDataProvider.getElementByUri(changedEditor.document.uri);\n\t\t\ttabDataProvider.setDirty(changedEditor);\n\n\t\t\ttreeView.reload(focusedTab)\n\t\t\t\t.then(() => {\n\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('Could not reload treeView.', err);\n\t\t\t\t});\n\t\t});\n\n\t\t// Focus tab in sidebar when saving document\n\t\teditor.onDidSave(savedEditor => {\n\t\t\t//console.log('Document saved');\n\n\t\t\tfocusedTab = tabDataProvider.getElementByUri(savedEditor.document.uri);\n\t\t\ttabDataProvider.setDirty(savedEditor);\n\n\t\t\ttreeView.reload(focusedTab)\n\t\t\t\t.then(() => {\n\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('Could not reload treeView.', err);\n\t\t\t\t});\n\t\t});\n\n\t\tconst document = editor.document;\n\t\tdocument.onDidChangePath((changedDocument, path) => {\n\t\t\tif (nova.inDevMode()) console.log('editor.document.onDidChangePath', changedDocument.uri, path);\n\t\t});\n\n\t\tdocument.onDidChangeSyntax((changedDocument, newSyntax) => {\n\t\t\tif (nova.inDevMode()) console.log('editor.document.onDidChangeSyntax', changedDocument.uri, newSyntax);\n\t\t});\n\t});\n\n\ttreeView.onDidChangeSelection((selection) => {\n\t\tif (nova.inDevMode()) console.log('treeView.onDidChangeSelection');\n\t\t//console.log('New selection: ' + selection.map((e) => e.name));\n\n\t\tif (!selection[0]) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Prevent tab opening when editor selection changes\n\t\tif (openTabWhenFocusSidebar === false) {\n\t\t\topenTabWhenFocusSidebar = true;\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeDocument = nova.workspace.activeTextEditor ? nova.workspace.activeTextEditor.document : null;\n\n\t\tif (openOnSingleClick && (!activeDocument || activeDocument.uri !== selection[0].uri)) {\n\t\t\tnova.commands.invoke('tabs-sidebar.open');\n\t\t}\n\t});\n\n\ttreeView.onDidExpandElement((element) => {\n\t\t// console.log('Expanded: ' + element.name);\n\t});\n\n\ttreeView.onDidCollapseElement((element) => {\n\t\t// console.log('Collapsed: ' + element.name);\n\t});\n\n\ttreeView.onDidChangeVisibility(() => {\n\t\t// console.log('Visibility Changed');\n\t});\n\n\t// TreeView implements the Disposable interface\n\tnova.subscriptions.add(treeView);\n};\n\nexports.deactivate = function() {\n\t// Clean up state before the extension is deactivated\n};\n\nnova.commands.register('tabs-sidebar.close', (workspace: Workspace) => {\n\t// console.log('Close Tab clicked');\n\n\tconst selection = treeView.selection;\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\tlet activeDocument = workspace.activeTextEditor ? workspace.activeTextEditor.document : null;\n\tconst activeDocumentIsRemote = activeDocument ? activeDocument.isRemote : false;\n\tconst selectionIsRemote = selection[0].isRemote;\n\n\t// Close currently active tab\n\tif (activeDocument && selection[0].uri === activeDocument.uri) {\n\t\ttabDataProvider\n\t\t\t.runProcess(__dirname + '/click_menu_item.sh', [nova.localize('File'), nova.localize('Close Tab')])\n\t\t\t.then(result => {\n\t\t\t\tactiveDocument = workspace.activeTextEditor ? workspace.activeTextEditor.document : null;\n\n\t\t\t\tif (activeDocument) {\n\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(activeDocument.uri);\n\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error('Could not click menu item.', err);\n\t\t\t});\n\n\t\treturn;\n\t}\n\n\tif (!selectionIsRemote) {\n\t\t// Close non currently active tab by switching to it and back\n\t\tworkspace.openFile(selection[0].uri)\n\t\t\t.then(() => {\n\t\t\t\ttabDataProvider\n\t\t\t\t\t.runProcess(__dirname + '/click_menu_item.sh', [nova.localize('File'), nova.localize('Close Tab')])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (!activeDocument) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Switch back to local tab after closing other local tab\n\t\t\t\t\t\tif (!activeDocumentIsRemote) {\n\t\t\t\t\t\t\tworkspace.openFile(activeDocument.uri)\n\t\t\t\t\t\t\t\t.then(value => {\n\t\t\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(value.document.uri);\n\t\t\t\t\t\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((err: string) => {\n\t\t\t\t\t\t\t\t\tconsole.error('Could not open file.', err);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Switch back to remote tab after closing other local tab\n\t\t\t\t\t\topenRemoteTab(activeDocument.uri)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tif (activeDocument) {\n\t\t\t\t\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(activeDocument.uri);\n\t\t\t\t\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\tconsole.error('Could not open remote tab.', err);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('Could not click menu item.', err);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err: string) => {\n\t\t\t\tconsole.error('Could not open file.', err);\n\t\t\t});\n\n\t\treturn;\n\t}\n\n\topenRemoteTab(selection[0].uri)\n\t\t.then(() => {\n\t\t\ttabDataProvider\n\t\t\t\t.runProcess(__dirname + '/click_menu_item.sh', [nova.localize('File'), nova.localize('Close Tab')])\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (!activeDocument) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Switch back to local tab after closing other remote tab\n\t\t\t\t\tif (!activeDocumentIsRemote) {\n\t\t\t\t\t\tworkspace.openFile(activeDocument.uri)\n\t\t\t\t\t\t\t.then(value => {\n\t\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(value.document.uri);\n\t\t\t\t\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((err: string) => {\n\t\t\t\t\t\t\t\tconsole.error('Could not open file.', err);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Switch back to remote tab after closing other remote tab\n\t\t\t\t\topenRemoteTab(activeDocument.uri)\n\t\t\t\t\t\t.then(value => {\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(value.document.uri);\n\t\t\t\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tconsole.error('Could not open remote tab.', err);\n\t\t\t\t\t\t});\n\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('Could not click menu item.', err);\n\t\t\t\t});\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error('Could not open remote tab.', err);\n\t\t});\n});\n\nnova.commands.register('tabs-sidebar.open', (workspace: Workspace) => {\n\tconst selection = treeView.selection;\n\t// console.log('Selection: ' + selection[0].name);\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\tconst isRemote = selection[0].isRemote;\n\n\t// Switch to tab for local file\n\tif (!isRemote) {\n\t\tworkspace.openFile(selection[0].uri)\n\t\t\t.then(value => {\n\t\t\t\tif (value) {\n\t\t\t\t\tfocusedTab = tabDataProvider.getElementByUri(value.document.uri);\n\t\t\t\t\t//treeView.reveal(focusedTab, { focus: true });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err: string) => {\n\t\t\t\tconsole.error('Could not open file.', err);\n\t\t\t});\n\t\treturn;\n\t}\n\n\t// Switch to tab for remote file\n\topenRemoteTab(selection[0].uri)\n\t\t.then((editor: TextEditor) => {\n\t\t\tfocusedTab = tabDataProvider.getElementByUri(editor.document.uri);\n\t\t\t//treeView.reveal(focusedTab, { focus: true });\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error('Could not open remote tab.', err);\n\t\t});\n});\n\nnova.commands.register('tabs-sidebar.doubleClick', () => {\n\t// Invoked when an item is double-clicked\n\tnova.commands.invoke('tabs-sidebar.open');\n});\n\nnova.commands.register('tabs-sidebar.up', () => {\n\t// Invoked when the 'Move Up' header button is clicked\n\tconst selection = treeView.selection;\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\tif (selection[0] instanceof FolderItem) {\n\t\treturn;\n\t}\n\n\t// console.log(JSON.stringify(selection[0]));\n\t// console.log('Move Up: ' + selection.map((e) => e.name));\n\n\ttabDataProvider.moveTab(selection[0], -1);\n});\n\nnova.commands.register('tabs-sidebar.down', () => {\n\t// Invoked when the 'Move Down' header button is clicked\n\tconst selection = treeView.selection;\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\tif (selection[0] instanceof FolderItem) {\n\t\treturn;\n\t}\n\n\t// console.log(JSON.stringify(selection[0]));\n\t// console.log('Move Down: ' + selection.map((e) => e.name));\n\n\ttabDataProvider.moveTab(selection[0], 1);\n});\n\nnova.commands.register('tabs-sidebar.cleanUpByTabBarOrder', (workspace: Workspace) => {\n\t//console.log('Clean up by tab bar order clicked');\n\n\ttabDataProvider.runProcess(__dirname + '/list_menu_items.sh', [nova.localize('Window')])\n\t\t.then(result => {\n\t\t\t//console.log(result);\n\n\t\t\ttabDataProvider.cleanUpByTabBarOrder(result);\n\n\t\t\tfocusedTab = workspace.activeTextEditor ? tabDataProvider.getElementByUri(workspace.activeTextEditor.document.uri) : undefined;\n\t\t\ttreeView.reload()\n\t\t\t\t.then(() => {\n\t\t\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('Could not reload treeView.', err);\n\t\t\t\t});\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error(err);\n\t\t});\n});\n\nnova.commands.register('tabs-sidebar.cleanUpByAlpha', () => {\n\tif (nova.inDevMode()) console.log('cleanUpByAlpha');\n\n\ttabDataProvider.cleanUpByAlpha();\n\ttreeView.reload()\n\t\t.then(() => {\n\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error('Could not reload treeView.', err);\n\t\t});\n});\n\nnova.commands.register('tabs-sidebar.cleanUpByKind', () => {\n\tif (nova.inDevMode()) console.log('cleanUpByKind');\n\n\ttabDataProvider.cleanUpByKind();\n\ttreeView.reload()\n\t\t.then(() => {\n\t\t\ttreeView.reveal(focusedTab || null, { focus: true });\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error('Could not reload treeView.', err);\n\t\t});\n});\n\nnova.commands.register('tabs-sidebar.sortByAlpha', (workspace: Workspace) => {\n\tif (nova.inDevMode()) console.log('Sort alphabetically');\n\n\tconst sortAlpha = !workspace.config.get('eablokker.tabsSidebar.config.sortAlpha', 'boolean');\n\n\tworkspace.config.set('eablokker.tabsSidebar.config.sortAlpha', sortAlpha);\n\n\ttabDataProvider.setSortAlpha(sortAlpha);\n\ttreeView.reload();\n});\n\nnova.commands.register('tabs-sidebar.groupByKind', (workspace: Workspace) => {\n\tif (nova.inDevMode()) console.log('groupByKind');\n\n\tworkspace.config.set('eablokker.tabsSidebar.config.groupByKind', !groupByKind);\n});\n\nnova.commands.register('tabs-sidebar.showInFilesSidebar', (workspace: Workspace) => {\n\tif (nova.inDevMode()) console.log('Show in Files Sidebar');\n\n\tconst selection = treeView.selection;\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\t// Need to open selected tab in order to invoke command\n\tworkspace.openFile(selection[0].uri)\n\t\t.then(() => {\n\t\t\ttabDataProvider\n\t\t\t\t.runProcess(__dirname + '/click_menu_item.sh', [nova.localize('File'), nova.localize('Show in Files Sidebar')])\n\t\t\t\t.then(() => {\n\t\t\t\t\t//\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error('Could not click menu item.', err);\n\t\t\t\t});\n\t\t})\n\t\t.catch((err: string) => {\n\t\t\tconsole.error('Could not open file.', err);\n\t\t});\n});\n\nnova.commands.register('tabs-sidebar.showInFinder', () => {\n\tconst selection = treeView.selection;\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\tif (!selection[0].path) {\n\t\tif (nova.inDevMode()) console.log('No path found for selection', selection[0].name);\n\t\treturn;\n\t}\n\n\tnova.fs.reveal(selection[0].path);\n});\n\nnova.commands.register('tabs-sidebar.copyPath', () => {\n\tconst selection = treeView.selection;\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\tif (!selection[0].path) {\n\t\tif (nova.inDevMode()) console.log('No path found for selection', selection[0].name);\n\t\treturn;\n\t}\n\n\tnova.clipboard.writeText(selection[0].path);\n});\n\nnova.commands.register('tabs-sidebar.copyRelativePath', (workspace: Workspace) => {\n\tconst selection = treeView.selection;\n\n\tif (!selection[0]) {\n\t\treturn;\n\t}\n\n\tif (!selection[0].path) {\n\t\tif (nova.inDevMode()) console.log('No path found for selection', selection[0].name);\n\t\treturn;\n\t}\n\n\tif (workspace.path) {\n\t\tnova.clipboard.writeText(selection[0].path.substring(workspace.path.length));\n\t} else {\n\t\tnova.clipboard.writeText(selection[0].path);\n\t}\n});\n\nnova.commands.register('tabs-sidebar.refresh', (workspace: Workspace) => {\n\tconst selection = treeView.selection;\n\n\tif (selection[0] instanceof FolderItem) {\n\t\ttabDataProvider.loadData(workspace.textDocuments);\n\t} else {\n\t\ttabDataProvider.loadData(workspace.textDocuments, selection[0] || undefined);\n\t}\n\n\ttreeView.reload();\n});\n\nclass TabItem {\n\tname: string;\n\tpath: string | undefined;\n\turi: string;\n\tdescriptiveText: string;\n\tisRemote: boolean;\n\tisDirty: boolean;\n\tisUntitled: boolean;\n\tisTrashed: boolean;\n\tchildren: TabItem[];\n\tparent: FolderItem | null;\n\tsyntax: string;\n\textension: string | undefined;\n\ticon: string | undefined;\n\tcount: number | undefined;\n\tcontextValue: string;\n\n\tconstructor(name: string, tab: TextDocument) {\n\t\t// Check if in .Trash folder\n\t\tconst trashRegex = new RegExp('^file:\\/\\/' + nova.path.expanduser('~') + '\\/\\.Trash\\/');\n\t\tconst isTrashed = trashRegex.test(decodeURI(tab.uri));\n\n\t\tconst extName = nova.path.extname(tab.path || '').replace(/^\\./, '');\n\n\t\tthis.name = name;\n\t\tthis.path = tab.path || undefined;\n\t\tthis.uri = tab.uri;\n\t\tthis.descriptiveText = '';\n\t\tthis.isRemote = tab.isRemote || false;\n\t\tthis.isDirty = tab.isDirty || false;\n\t\tthis.isUntitled = tab.isUntitled || false;\n\t\tthis.isTrashed = isTrashed;\n\t\tthis.children = [];\n\t\tthis.parent = null;\n\t\tthis.syntax = tab.syntax || 'plaintext';\n\t\tthis.extension = extName;\n\t\tthis.icon = undefined;\n\t\tthis.count = undefined;\n\t\tthis.contextValue = tab.isRemote ? 'remote-tab' : 'tab';\n\t}\n}\n\nclass FolderItem {\n\tname: string;\n\tpath: string | undefined;\n\turi: string;\n\tdescriptiveText: string;\n\tisRemote: boolean;\n\tisDirty: boolean;\n\tchildren: TabItem[];\n\tparent: FolderItem | null;\n\tcollapsibleState: TreeItemCollapsibleState;\n\tsyntax: string;\n\textension: string | undefined;\n\ticon: string | undefined;\n\tcount: number | undefined;\n\tcontextValue: string;\n\n\tconstructor(name: string, syntax: string | null, extName: string) {\n\t\tthis.name = name;\n\t\tthis.path = undefined;\n\t\tthis.uri = '';\n\t\tthis.descriptiveText = '';\n\t\tthis.isRemote = false;\n\t\tthis.isDirty = false;\n\t\tthis.children = [];\n\t\tthis.parent = null;\n\t\tthis.collapsibleState = TreeItemCollapsibleState.None;\n\t\tthis.syntax = syntax || 'plaintext';\n\t\tthis.extension = extName;\n\t\tthis.icon = undefined;\n\t\tthis.count = undefined;\n\t\tthis.contextValue = 'kindGroup';\n\t}\n\n\taddChild(element: TabItem) {\n\t\telement.parent = this;\n\t\tthis.children.push(element);\n\t}\n}\n\nclass TabDataProvider {\n\tflatItems: TabItem[];\n\tgroupedItems: FolderItem[];\n\tcustomOrder: string[];\n\tsortAlpha: boolean | null;\n\tgroupByKind: boolean | null;\n\n\tconstructor() {\n\t\tthis.flatItems = [];\n\t\tthis.groupedItems = [];\n\t\tthis.customOrder = customTabOrder || [];\n\n\t\tthis.sortAlpha = nova.workspace.config\n\t\t\t.get('eablokker.tabsSidebar.config.sortAlpha', 'boolean');\n\t\tthis.groupByKind = groupByKind;\n\t}\n\n\tloadData(documentTabs: readonly TextDocument[], focusedTab?: TabItem) {\n\t\t// Remove extraneous from custom order\n\t\tif (this.customOrder.length) {\n\t\t\tthis.customOrder = this.customOrder.filter(path => {\n\t\t\t\treturn documentTabs.some(tab => tab.path === path);\n\t\t\t});\n\t\t}\n\n\t\t// Remove closed tabs\n\t\tthis.flatItems.forEach((item, i, self) => {\n\t\t\tconst tabIsClosed = documentTabs.every(tab => tab.uri !== item.uri);\n\t\t\tif (tabIsClosed) {\n\t\t\t\t// Remove from flat items\n\t\t\t\tself.splice(i, 1);\n\t\t\t\t// Remove from custom order\n\t\t\t\tthis.customOrder.splice(this.customOrder.indexOf(item.path || '', 1));\n\t\t\t}\n\t\t});\n\n\t\tthis.groupedItems.forEach((folder, i, self) => {\n\t\t\tfolder.children.forEach((child, i2, self2) => {\n\t\t\t\tconst tabIsClosed = documentTabs.every(tab => tab.uri !== child.uri);\n\t\t\t\tif (tabIsClosed) {\n\t\t\t\t\tself2.splice(i2, 1);\n\n\t\t\t\t\t// Remove folder if now empty\n\t\t\t\t\tif (!folder.children.length) {\n\t\t\t\t\t\tself.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// Add newly opened tabs\n\t\tdocumentTabs.forEach(tab => {\n\t\t\t// Hide untitled tabs\n\t\t\tif (tab.isUntitled || !tab.path) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if tab is new in custom order\n\t\t\tconst tabIsNewInCustomOrder = this.customOrder.every(path => path !== tab.path);\n\n\t\t\t// Add new tab to custom order\n\t\t\tif (tabIsNewInCustomOrder && focusedTab) {\n\t\t\t\t// Splice new tab into array just after focused tab\n\t\t\t\tconst tabIndex = this.customOrder\n\t\t\t\t\t.findIndex(path => path === focusedTab.path);\n\t\t\t\tthis.customOrder.splice(tabIndex + 1, 0, tab.path);\n\t\t\t} else if (tabIsNewInCustomOrder) {\n\t\t\t\tthis.customOrder.push(tab.path);\n\t\t\t}\n\n\t\t\t// Check if tab is new in flat items\n\t\t\tconst tabIsNew = this.flatItems.every(item => item.uri !== tab.uri);\n\n\t\t\t// Add tab to flat items if new\n\t\t\tif (tabIsNew) {\n\t\t\t\tconst tabName = this.basename(tab.path || 'untitled');\n\n\t\t\t\tconst element = new TabItem(tabName, tab);\n\n\t\t\t\tthis.flatItems.push(element);\n\n\t\t\t\t// Add tab to grouped items if new\n\t\t\t\tconst tabSyntax = tab.syntax || 'plaintext';\n\t\t\t\tconst folder = this.groupedItems.find(group => group.syntax === tabSyntax);\n\n\t\t\t\tif (folder) {\n\t\t\t\t\tconst childIndex = folder.children.findIndex(child => child.uri === tab.uri);\n\t\t\t\t\tif (childIndex < 0) {\n\t\t\t\t\t\tfolder.addChild(Object.assign({}, element));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst titleCaseName = tabSyntax\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n\t\t\t\t\t\t.join(' ');\n\n\t\t\t\t\tconst extName = nova.path.extname(tab.path || '').replace(/^\\./, '');\n\n\t\t\t\t\tconst newFolder = new FolderItem(\n\t\t\t\t\t\tsyntaxnames[tabSyntax as keyof typeof syntaxnames] || titleCaseName,\n\t\t\t\t\t\ttab.syntax,\n\t\t\t\t\t\textName\n\t\t\t\t\t);\n\n\t\t\t\t\tnewFolder.addChild(Object.assign({}, element));\n\t\t\t\t\tthis.groupedItems.push(newFolder);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tnova.workspace.config.set('eablokker.tabsSidebar.config.customTabOrder', this.customOrder);\n\n\t\tthis.sortItems();\n\t}\n\n\trunProcess(scriptPath: string, args: string[], timeout = 3000): Promise<string> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet outString = '';\n\t\t\tlet errorString = '';\n\n\t\t\tconst process = new Process(scriptPath, { args: args });\n\n\t\t\tprocess.onStdout(line => {\n\t\t\t\toutString += line;\n\t\t\t});\n\n\t\t\tprocess.onStderr(line => {\n\t\t\t\terrorString += line;\n\t\t\t});\n\n\t\t\tconst timeoutID = setTimeout(() => {\n\t\t\t\t// Ensure the process terminates in a timely fashion\n\t\t\t\treject('The process did not respond in a timely manner.');\n\t\t\t\tprocess.terminate();\n\t\t\t}, timeout);\n\n\t\t\tprocess.onDidExit(status => {\n\t\t\t\tclearTimeout(timeoutID);\n\n\t\t\t\tif (errorString.length) {\n\t\t\t\t\treject(new Error(errorString));\n\t\t\t\t} else {\n\t\t\t\t\tresolve(outString);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tprocess.start();\n\t\t});\n\t}\n\n\tsetDirty(editor: TextEditor) {\n\t\tconst element = this.getElementByUri(editor.document.uri);\n\n\t\tif (element) {\n\t\t\telement.isDirty = editor.document.isDirty;\n\t\t}\n\t}\n\n\tbasename(uri: string) {\n\t\treturn nova.path.basename(uri);\n\t}\n\n\tisUniqueName(tab: TabItem) {\n\t\treturn nova.workspace.textDocuments\n\t\t\t.filter(doc => doc.uri !== tab.uri)\n\t\t\t.every(doc => {\n\t\t\t\tconst basename = this.basename(doc.uri);\n\t\t\t\treturn basename !== this.basename(tab.uri);\n\t\t\t});\n\t}\n\n\tgetCommonBasePath(tab: TabItem) {\n\t\tconst tabDirArray = nova.path.split(nova.path.dirname(tab.path || ''));\n\t\tconst similarTabs = nova.workspace.textDocuments\n\t\t\t.filter(doc => {\n\t\t\t\t// Differentiate between local and remote files with same name\n\t\t\t\treturn doc.isRemote === tab.isRemote && this.basename(doc.uri) === this.basename(tab.uri);\n\t\t\t});\n\n\t\tconst commonDirArray: string[] = [];\n\t\ttabDirArray.every((dir, i) => {\n\t\t\tconst commonDir = similarTabs.every((tab2) => {\n\t\t\t\tconst tabDirArray2 = nova.path.split(nova.path.dirname(tab2.path || ''));\n\t\t\t\treturn tabDirArray2[i] === dir;\n\t\t\t});\n\n\t\t\tif (!commonDir) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tcommonDirArray.push(dir);\n\t\t\treturn true;\n\t\t});\n\n\t\tif (commonDirArray.length === 1) {\n\t\t\treturn '/';\n\t\t}\n\n\t\treturn commonDirArray.join('/');\n\t}\n\n\tmoveTab(tab: TabItem, distance: number) {\n\t\t// Original tab path\n\t\tconst uri = tab.uri;\n\t\tconst path = tab.path;\n\n\t\t// Get item indexes\n\t\tconst fromItemIndex = this.flatItems.findIndex(item => item.uri === uri);\n\t\tconst toItemIndex = fromItemIndex + distance;\n\n\t\tif (toItemIndex < 0 || toItemIndex >= this.flatItems.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get items to swap\n\t\tconst fromItem = this.flatItems[fromItemIndex];\n\t\tconst toItem = this.flatItems[toItemIndex];\n\n\t\t// Swap data between items\n\t\tconst keys = Object.keys(fromItem).concat(Object.keys(toItem));\n\t\tkeys\n\t\t\t.filter((key, i, keys) => keys.indexOf(key) === i) // Remove duplicates\n\t\t\t.forEach((key) => {\n\t\t\t\t// Preserve context value\n\t\t\t\tif (key === 'contextValue') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst tabItemKey = key as keyof TabItem;\n\n\t\t\t\tconst newVal = fromItem[tabItemKey];\n\t\t\t\tconst oldVal = toItem[tabItemKey];\n\n\t\t\t\t// @ts-expect-error Need to figure out how to swap values\n\t\t\t\ttoItem[tabItemKey] = newVal;\n\t\t\t\t// @ts-expect-error Need to figure out how to swap values\n\t\t\t\tfromItem[tabItemKey] = oldVal;\n\t\t\t});\n\n\t\t// Update custom order\n\t\tconst fromIndex = this.customOrder.indexOf(path || '');\n\t\tconst toIndex = fromIndex + distance;\n\n\t\tif (toIndex < 0 || toIndex >= this.customOrder.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = this.customOrder.splice(fromIndex, 1)[0];\n\t\tthis.customOrder.splice(toIndex, 0, item);\n\t\tnova.workspace.config.set('eablokker.tabsSidebar.config.customTabOrder', this.customOrder);\n\n\t\t// Reload each item that got swapped\n\t\tPromise.all([treeView.reload(fromItem), treeView.reload(toItem)])\n\t\t\t.then(() => {\n\t\t\t\topenTabWhenFocusSidebar = false;\n\t\t\t\ttreeView.reveal(toItem, { focus: true });\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\tcleanUpByTabBarOrder(result: string) {\n\t\tconst windowList = result.split(', ');\n\t\tconst currentWindow: string[] = [];\n\n\t\tlet projectFound = false;\n\t\twindowList.every((menuItem: string) => {\n\t\t\tif (menuItem.trim() === '✓') {\n\t\t\t\tprojectFound = true;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Stop at end of current project list\n\t\t\tif (projectFound && menuItem.trim() === nova.localize('missing value')) {\n\t\t\t\tprojectFound = false;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (projectFound) {\n\t\t\t\tcurrentWindow.push(menuItem.trim());\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\tthis.customOrder.sort((a, b) => {\n\t\t\t// Sort by parent path if filename is not unique\n\t\t\tconst paths = [a, b].map(path => {\n\t\t\t\tlet basename = nova.path.basename(path);\n\t\t\t\tlet parentPath = '';\n\t\t\t\tconst element = tabDataProvider.getElementByPath(path);\n\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn basename;\n\t\t\t\t}\n\n\t\t\t\tconst isUnique = tabDataProvider.isUniqueName(element);\n\n\t\t\t\tif (isUnique) {\n\t\t\t\t\treturn basename;\n\t\t\t\t}\n\n\t\t\t\tconst commonBasePath = tabDataProvider.getCommonBasePath(element);\n\t\t\t\tparentPath = decodeURI(nova.path.dirname(element.path || '').substring(commonBasePath.length));\n\n\t\t\t\tif (parentPath.length) {\n\t\t\t\t\tbasename += ' – ' + parentPath;\n\t\t\t\t}\n\n\t\t\t\treturn basename;\n\t\t\t});\n\n\t\t\tif (!currentWindow.length) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (currentWindow.indexOf(paths[0]) < 0) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tcurrentWindow.indexOf(paths[0]) -\n\t\t\t\tcurrentWindow.indexOf(paths[1])\n\t\t\t);\n\t\t});\n\t\tnova.workspace.config.set('eablokker.tabsSidebar.config.customTabOrder', this.customOrder);\n\n\t\tthis.sortItems();\n\t}\n\n\tcleanUpByAlpha() {\n\t\tthis.customOrder.sort((a, b) => {\n\t\t\treturn nova.path.basename(a).localeCompare(nova.path.basename(b));\n\t\t});\n\t\tnova.workspace.config.set('eablokker.tabsSidebar.config.customTabOrder', this.customOrder);\n\n\t\tthis.sortItems();\n\t}\n\n\tcleanUpByKind() {\n\t\tconst elementArray = this.customOrder.map(path => {\n\t\t\treturn tabDataProvider.getElementByPath(path);\n\t\t});\n\n\t\tthis.customOrder.sort((a, b) => {\n\t\t\tconst aElement = elementArray.find(item => item?.path === a);\n\t\t\tconst bElement = elementArray.find(item => item?.path === b);\n\n\t\t\tif (!aElement || !bElement) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn aElement.syntax.localeCompare(bElement.syntax);\n\t\t});\n\t\tnova.workspace.config.set('eablokker.tabsSidebar.config.customTabOrder', this.customOrder);\n\n\t\tthis.sortItems();\n\t}\n\n\tsetSortAlpha(sortAlpha: boolean) {\n\t\t//console.log('Setting sort alpha', sortAlpha);\n\t\tthis.sortAlpha = sortAlpha;\n\n\t\tthis.sortItems();\n\t}\n\n\tsetGroupByKind(groupByKind: boolean) {\n\t\t//console.log('Setting sort by kind', groupByKind);\n\t\tthis.groupByKind = groupByKind;\n\n\t\tthis.sortItems();\n\t}\n\n\tbyCustomOrder(a: TabItem, b: TabItem) {\n\t\tif (this.customOrder.indexOf(a.path || '') < 0) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn this.customOrder.indexOf(a.path || '') - this.customOrder.indexOf(b.path || '');\n\t}\n\n\tsortItems() {\n\t\t// Sort custom ordered items by custom order\n\t\tthis.flatItems.sort(this.byCustomOrder.bind(this));\n\n\t\t// Sort folders alphabetically\n\t\tthis.groupedItems.sort((a, b) => {\n\t\t\treturn a.name.localeCompare(b.name);\n\t\t});\n\n\t\t// Sort folder children by custom order\n\t\tthis.groupedItems.forEach(item => {\n\t\t\titem.children.sort(this.byCustomOrder.bind(this));\n\t\t});\n\n\t\t// Set context of position in list\n\t\tconst length = this.flatItems.length;\n\t\tthis.flatItems.forEach((tab, i) => {\n\t\t\tif (length === 1) {\n\t\t\t\ttab.contextValue = tab.isRemote ? 'remote-only' : 'only';\n\t\t\t} else if (i === 0) {\n\t\t\t\ttab.contextValue = tab.isRemote ? 'remote-first' : 'first';\n\t\t\t} else if (i === length - 1) {\n\t\t\t\ttab.contextValue = tab.isRemote ? 'remote-last' : 'last';\n\t\t\t} else {\n\t\t\t\ttab.contextValue = tab.isRemote ? 'remote-tab' : 'tab';\n\t\t\t}\n\t\t});\n\n\t\t//console.log('this.customOrder', this.customOrder);\n\n\t\tif (this.sortAlpha) {\n\t\t\tif (nova.inDevMode()) console.log('Sorting by alpha');\n\n\t\t\tthis.flatItems.sort((a, b) => {\n\t\t\t\treturn a.name.localeCompare(b.name);\n\t\t\t});\n\t\t}\n\n\t\tif (this.groupByKind && this.sortAlpha) {\n\t\t\tif (nova.inDevMode()) console.log('Sorting folders by alpha');\n\n\t\t\tthis.groupedItems.sort((a, b) => {\n\t\t\t\treturn a.name.localeCompare(b.name);\n\t\t\t});\n\n\t\t\tthis.groupedItems.forEach(item => {\n\t\t\t\titem.children.sort((a, b) => {\n\t\t\t\t\treturn a.name.localeCompare(b.name);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tgetElementByUri(uri: string): TabItem | undefined {\n\t\tif (this.groupByKind) {\n\t\t\tlet childElement: TabItem | undefined;\n\t\t\tthis.groupedItems.some(item => {\n\t\t\t\tchildElement = item.children.find(child => {\n\t\t\t\t\treturn child.uri === uri;\n\t\t\t\t});\n\n\t\t\t\treturn !!childElement;\n\t\t\t});\n\n\t\t\treturn childElement;\n\t\t}\n\n\t\treturn this.flatItems.find(item => {\n\t\t\treturn item.uri === uri;\n\t\t});\n\n\t}\n\n\tgetElementByPath(path: string): TabItem | undefined {\n\t\tconst element = this.flatItems.find(item => {\n\t\t\treturn item.path === path;\n\t\t});\n\n\t\tif (element) {\n\t\t\treturn element;\n\t\t}\n\n\t\tlet childElement = undefined;\n\t\tthis.flatItems.some(item => {\n\t\t\tchildElement = item.children.find(child => {\n\t\t\t\treturn child.path === path;\n\t\t\t});\n\n\t\t\treturn !!childElement;\n\t\t});\n\n\t\treturn childElement;\n\t}\n\n\tgetFolderBySyntax(syntax: string) {\n\t\treturn this.groupedItems.find((folder: FolderItem) => folder.syntax === syntax);\n\t}\n\n\tgetChildren(element: TabItem | FolderItem) {\n\t\t// Requests the children of an element\n\t\tif (!element) {\n\t\t\tif (this.groupByKind) {\n\t\t\t\treturn this.groupedItems;\n\t\t\t} else {\n\t\t\t\treturn this.flatItems;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn element.children;\n\t\t}\n\t}\n\n\tgetParent(element: TabItem | FolderItem) {\n\t\t// Requests the parent of an element, for use with the reveal() method\n\n\t\tif (nova.inDevMode()) console.log('getParent');\n\n\t\tif (element === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn element.parent;\n\t}\n\n\tgetTreeItem(element: TabItem | FolderItem) {\n\t\t// Converts an element into its display (TreeItem) representation\n\t\tlet item: TreeItem;\n\n\t\tif (element instanceof FolderItem) {\n\t\t\titem = new TreeItem(element.name);\n\n\t\t\titem.descriptiveText = showGroupCount ? '(' + element.children.length + ')' : '';\n\t\t\titem.collapsibleState = TreeItemCollapsibleState.Expanded;\n\t\t\titem.path = element.path;\n\t\t\titem.tooltip = '';\n\t\t\titem.contextValue = element.contextValue;\n\t\t\titem.identifier = element.syntax;\n\t\t\titem.image = element.extension ? '__filetype.' + element.extension : element.syntax === 'plaintext' ? '__filetype.txt' : '__filetype.blank';\n\t\t}\n\t\telse {\n\t\t\tlet name = element.name;\n\t\t\tlet description = '';\n\n\t\t\tif (element.isDirty) {\n\t\t\t\tswitch (unsavedSymbolLocation) {\n\t\t\t\tcase 'never':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'after-filename':\n\t\t\t\t\tdescription = (unsavedSymbol || '⚫︎') + ' ' + description;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'before-filename':\n\t\t\t\tdefault:\n\t\t\t\t\tname = (unsavedSymbol || '⚫︎') + ' ' + name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\titem = new TreeItem(name);\n\n\t\t\t// Calculate parent folder path for description\n\t\t\tlet parentPath = '';\n\t\t\tconst isUnique = this.isUniqueName(element);\n\n\t\t\t// Always show parent folder if config setting is toggled on\n\t\t\tif (alwaysShowParentFolder && !parentPath.length) {\n\t\t\t\tconst tabDirArray = nova.path.split(nova.path.dirname(element.path || ''));\n\t\t\t\tparentPath = decodeURI(tabDirArray[tabDirArray.length - 1]);\n\t\t\t\tdescription += '‹ ' + parentPath;\n\t\t\t}\n\n\t\t\t// Show parent path if filename is not unique\n\t\t\tif (!isUnique) {\n\t\t\t\tconst commonBasePath = this.getCommonBasePath(element);\n\t\t\t\tconst parentPathSplit = decodeURI(nova.path.dirname(element.path || '').substring(commonBasePath.length))\n\t\t\t\t\t.split('/')\n\t\t\t\t\t.reverse();\n\n\t\t\t\tparentPathSplit\n\t\t\t\t\t.filter(dir => dir.length)\n\t\t\t\t\t.forEach((dir, i) => {\n\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\tdescription = '';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdescription += '‹ ' + dir + ' ';\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (element.isTrashed) {\n\t\t\t\tconst trashString = nova.localize('Trash');\n\t\t\t\tdescription = '‹ ' + trashString + ' 🗑';\n\t\t\t} else if (element.isRemote) {\n\t\t\t\tdescription = '☁️' + description;\n\t\t\t}\n\n\t\t\titem.descriptiveText = description;\n\t\t\titem.path = element.path;\n\t\t\titem.tooltip = element.path;\n\t\t\titem.command = 'tabs-sidebar.doubleClick';\n\t\t\titem.contextValue = element.contextValue;\n\t\t\titem.identifier = element.uri;\n\t\t\titem.image = element.extension ? '__filetype.' + element.extension : '__filetype.blank';\n\t\t}\n\t\treturn item;\n\t}\n}\n"],"names":[],"mappings":";;AAAA,IAAI,QAA+C,CAAC;AACpD,IAAI,eAAgC,CAAC;AACrC,IAAI,UAA+B,CAAC;AACpC,IAAI,uBAAuB,GAAG,IAAI,CAAC;AAEnC;AACA,IAAI,iBAAiB,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,6CAA6C,EAAE,SAAS,CAAC,CAAC;AAClG,IAAI,sBAAsB,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,kDAAkD,EAAE,SAAS,CAAC,CAAC;AAC5G,IAAI,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,yCAAyC,EAAE,SAAS,CAAC,CAAC;AAE3F,IAAI,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,uCAAuC,EAAE,QAAQ,CAAC,CAAC;AACvF,IAAI,qBAAqB,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gDAAgD,EAAE,QAAQ,CAAC,CAAC;AAExG,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,0CAA0C,EAAE,SAAS,CAAC,CAAC;AACnG,IAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,6CAA6C,EAAE,OAAO,CAAC,CAAC;AAEzG,IAAM,WAAW,GAAG;AACnB,IAAA,WAAW,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;AACxC,IAAA,cAAc,EAAE,cAAc;AAC9B,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,YAAY,EAAE,YAAY;AAC1B,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,UAAU,EAAE,UAAU;AACtB,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,KAAK,EAAE,UAAU;AACjB,IAAA,QAAQ,EAAE,QAAQ;AAClB,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,OAAO,EAAE,cAAc;AACvB,IAAA,QAAQ,EAAE,QAAQ;AAClB,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,MAAM,EAAE,WAAW;AACnB,IAAA,eAAe,EAAE,eAAe;AAChC,IAAA,YAAY,EAAE,YAAY;AAC1B,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,KAAK,EAAE,KAAK;AACZ,IAAA,MAAM,EAAE,MAAM;CACd,CAAC;AAEF,IAAM,aAAa,GAAG,UAAC,GAAW,EAAA;AACjC,IAAA,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAA;QAClC,IAAM,OAAO,GAAG,eAAe,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QAErD,IAAI,CAAC,OAAO,EAAE;AACb,YAAA,OAAO,CAAC,IAAI,CAAC,+BAA+B,GAAG,GAAG,CAAC,CAAC;YACpD,OAAO;AACP,SAAA;AAED,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC/C,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAM,QAAQ,GAAG,eAAe,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;;QAGvD,IAAI,CAAC,QAAQ,EAAE;YACd,IAAM,cAAc,GAAG,eAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;YAClE,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;AACxF,SAAA;QAED,IAAI,UAAU,CAAC,MAAM,EAAE;AACtB,YAAA,QAAQ,IAAI,KAAK,GAAG,UAAU,CAAC;AAC/B,SAAA;QAED,eAAe;AACb,aAAA,UAAU,CAAC,SAAS,GAAG,gCAAgC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,CAAC;AAC7F,aAAA,IAAI,CAAC,YAAA;;AAEL,YAAA,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC;YAC/C,OAAO,CAAC,MAAM,CAAC,CAAC;AACjB,SAAC,CAAC;aACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,YAAA,OAAO,CAAC,KAAK,CAAC,2CAA2C,EAAE,GAAG,CAAC,CAAC;YAChE,MAAM,CAAC,GAAG,CAAC,CAAC;AACb,SAAC,CAAC,CAAC;AACL,KAAC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF,OAAO,CAAC,QAAQ,GAAG,YAAA;;;AAIlB,IAAA,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;AACxC,IAAA,QAAQ,GAAG,IAAI,QAAQ,CAAC,cAAc,EAAE;AACvC,QAAA,YAAY,EAAE,eAAe;AAC7B,KAAA,CAAC,CAAC;;AAGH,IAAA,IAAM,gBAAgB,GAAG;QACxB,qBAAqB;QACrB,gCAAgC;QAChC,qBAAqB;KACrB,CAAC;AAEF,IAAA,gBAAgB,CAAC,OAAO,CAAC,UAAA,IAAI,EAAA;QAC5B,IAAM,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAE9E,IAAI,CAAC,YAAY,EAAE;YAClB,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,SAAS,GAAG,IAAI,CAAC,CAAC;YAC1D,OAAO;AACP,SAAA;QAED,IAAM,kBAAkB,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AAEpF,QAAA,IAAI,YAAY,IAAI,CAAC,kBAAkB,EAAE;YACxC,eAAe;iBACb,UAAU,CAAC,YAAY,EAAE,CAAC,KAAK,EAAE,SAAS,GAAG,IAAI,CAAC,CAAC;AACnD,iBAAA,IAAI,CAAC,YAAA;gBACL,IAAI,IAAI,CAAC,SAAS,EAAE;oBAAE,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,GAAG,iBAAiB,CAAC,CAAC;AAC/E,aAAC,CAAC;iBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,gBAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACpB,aAAC,CAAC,CAAC;AACJ,SAAA;AACF,KAAC,CAAC,CAAC;;IAGH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,6CAA6C,EAAE,UAAC,MAAe,EAAE,MAAe,EAAA;QACvG,iBAAiB,GAAG,MAAM,CAAC;AAC5B,KAAC,CAAC,CAAC;IAEH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,kDAAkD,EAAE,UAAC,MAAe,EAAE,MAAe,EAAA;QAC5G,sBAAsB,GAAG,MAAM,CAAC;QAEhC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACnB,KAAC,CAAC,CAAC;IAEH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,yCAAyC,EAAE,UAAC,MAAe,EAAE,MAAe,EAAA;QACnG,cAAc,GAAG,MAAM,CAAC;QAExB,eAAe,CAAC,SAAS,EAAE,CAAC;QAC5B,QAAQ,CAAC,MAAM,EAAE,CAAC;AACnB,KAAC,CAAC,CAAC;IAEH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,uCAAuC,EAAE,UAAC,MAAc,EAAE,MAAc,EAAA;QAC/F,aAAa,GAAG,MAAM,CAAC;QAEvB,QAAQ,CAAC,MAAM,EAAE,CAAC;AACnB,KAAC,CAAC,CAAC;IAEH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,gDAAgD,EAAE,UAAC,MAAc,EAAE,MAAc,EAAA;QACxG,qBAAqB,GAAG,MAAM,CAAC;QAE/B,QAAQ,CAAC,MAAM,EAAE,CAAC;AACnB,KAAC,CAAC,CAAC;AAEH,IAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,0CAA0C,EAAE,UAAC,MAAe,EAAE,MAAe,EAAA;QAC9G,WAAW,GAAG,MAAM,CAAC;AAErB,QAAA,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QAC5C,QAAQ,CAAC,MAAM,EAAE,CAAC;AACnB,KAAC,CAAC,CAAC;;;;IAMH,IAAI,eAAe,GAAG,UAAU,CAAC,YAAA;;AAEjC,KAAC,CAAC,CAAC;AAEH,IAAA,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAA,MAAM,EAAA;;QAGvC,YAAY,CAAC,eAAe,CAAC,CAAC;QAC9B,eAAe,GAAG,UAAU,CAAC,YAAA;AAC5B,YAAA,IAAI,MAAM,CAAC;AACX,YAAA,IAAM,MAAM,GAAG,eAAe,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC;YAExF,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;YAEnE,IAAI,MAAM,IAAI,WAAW,EAAE;AAC1B,gBAAA,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACjC,aAAA;AAAM,iBAAA;AACN,gBAAA,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;AAC3B,aAAA;YAED,MAAM;AACJ,iBAAA,IAAI,CAAC,YAAA;;gBAEL,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;;AAEnE,aAAC,CAAC;iBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,gBAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,aAAC,CAAC,CAAC;SACJ,EAAE,CAAC,CAAC,CAAC;;AAGN,QAAA,MAAM,CAAC,YAAY,CAAC,UAAA,eAAe,EAAA;;AAGlC,YAAA,UAAU,CAAC,YAAA;AACV,gBAAA,IAAI,MAAM,CAAC;AACX,gBAAA,IAAM,MAAM,GAAG,eAAe,CAAC,iBAAiB,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC;gBAEjG,IAAI,MAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,WAAW,EAAE;AACxD,oBAAA,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACjC,iBAAA;AAAM,qBAAA;AACN,oBAAA,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;AAC3B,iBAAA;gBAED,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;gBAEvD,MAAM;AACJ,qBAAA,IAAI,CAAC,YAAA;oBACL,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,QAAQ,GAAG,IAAI,CAAC;AAEnG,oBAAA,IAAI,QAAQ,EAAE;wBACb,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC3D,wBAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACrD,qBAAA;AACF,iBAAC,CAAC;qBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,oBAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,iBAAC,CAAC,CAAC;aACJ,EAAE,CAAC,CAAC,CAAC;AACP,SAAC,CAAC,CAAC;;AAGH,QAAA,MAAM,CAAC,oBAAoB,CAAC,UAAA,aAAa,EAAA;;YAGxC,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACxC,YAAA,IAAM,QAAQ,GAAG,aAAa,CAAC,QAAQ,CAAC;;YAGxC,IAAI,SAAS,IAAI,SAAS,CAAC,GAAG,KAAK,QAAQ,CAAC,GAAG,EAAE;gBAChD,OAAO;AACP,aAAA;YAED,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;YACzE,uBAAuB,GAAG,KAAK,CAAC;AAChC,YAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACtD,SAAC,CAAC,CAAC;AAEH,QAAA,MAAM,CAAC,iBAAiB,CAAC,UAAA,aAAa,EAAA;;YAGrC,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACzE,YAAA,eAAe,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;AAExC,YAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC;AACzB,iBAAA,IAAI,CAAC,YAAA;AACL,gBAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACtD,aAAC,CAAC;iBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,gBAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,aAAC,CAAC,CAAC;AACL,SAAC,CAAC,CAAC;;AAGH,QAAA,MAAM,CAAC,SAAS,CAAC,UAAA,WAAW,EAAA;;YAG3B,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACvE,YAAA,eAAe,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAEtC,YAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC;AACzB,iBAAA,IAAI,CAAC,YAAA;AACL,gBAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACtD,aAAC,CAAC;iBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,gBAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,aAAC,CAAC,CAAC;AACL,SAAC,CAAC,CAAC;AAEH,QAAA,IAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;AACjC,QAAA,QAAQ,CAAC,eAAe,CAAC,UAAC,eAAe,EAAE,IAAI,EAAA;YAC9C,IAAI,IAAI,CAAC,SAAS,EAAE;gBAAE,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,eAAe,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACjG,SAAC,CAAC,CAAC;AAEH,QAAA,QAAQ,CAAC,iBAAiB,CAAC,UAAC,eAAe,EAAE,SAAS,EAAA;YACrD,IAAI,IAAI,CAAC,SAAS,EAAE;gBAAE,OAAO,CAAC,GAAG,CAAC,mCAAmC,EAAE,eAAe,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;AACxG,SAAC,CAAC,CAAC;AACJ,KAAC,CAAC,CAAC;AAEH,IAAA,QAAQ,CAAC,oBAAoB,CAAC,UAAC,SAAS,EAAA;QACvC,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,YAAA,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;;AAGnE,QAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;YAClB,OAAO;AACP,SAAA;;QAGD,IAAI,uBAAuB,KAAK,KAAK,EAAE;YACtC,uBAAuB,GAAG,IAAI,CAAC;YAC/B,OAAO;AACP,SAAA;QAED,IAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,QAAQ,GAAG,IAAI,CAAC;AAEzG,QAAA,IAAI,iBAAiB,KAAK,CAAC,cAAc,IAAI,cAAc,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;AACtF,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;AAC1C,SAAA;AACF,KAAC,CAAC,CAAC;AAEH,IAAA,QAAQ,CAAC,kBAAkB,CAAC,UAAC,OAAO,EAAA;;AAEpC,KAAC,CAAC,CAAC;AAEH,IAAA,QAAQ,CAAC,oBAAoB,CAAC,UAAC,OAAO,EAAA;;AAEtC,KAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,qBAAqB,CAAC,YAAA;;AAE/B,KAAC,CAAC,CAAC;;AAGH,IAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAClC,CAAC,CAAC;AAEF,OAAO,CAAC,UAAU,GAAG,YAAA;;AAErB,CAAC,CAAC;AAEF,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,oBAAoB,EAAE,UAAC,SAAoB,EAAA;;AAGjE,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;AAED,IAAA,IAAI,cAAc,GAAG,SAAS,CAAC,gBAAgB,GAAG,SAAS,CAAC,gBAAgB,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC7F,IAAA,IAAM,sBAAsB,GAAG,cAAc,GAAG,cAAc,CAAC,QAAQ,GAAG,KAAK,CAAC;IAChF,IAAM,iBAAiB,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;;AAGhD,IAAA,IAAI,cAAc,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,cAAc,CAAC,GAAG,EAAE;QAC9D,eAAe;aACb,UAAU,CAAC,SAAS,GAAG,qBAAqB,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;aAClG,IAAI,CAAC,UAAA,MAAM,EAAA;AACX,YAAA,cAAc,GAAG,SAAS,CAAC,gBAAgB,GAAG,SAAS,CAAC,gBAAgB,CAAC,QAAQ,GAAG,IAAI,CAAC;AAEzF,YAAA,IAAI,cAAc,EAAE;gBACnB,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;AACjE,gBAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACrD,aAAA;AACF,SAAC,CAAC;aACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,YAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,SAAC,CAAC,CAAC;QAEJ,OAAO;AACP,KAAA;IAED,IAAI,CAAC,iBAAiB,EAAE;;QAEvB,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAClC,aAAA,IAAI,CAAC,YAAA;YACL,eAAe;iBACb,UAAU,CAAC,SAAS,GAAG,qBAAqB,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;AAClG,iBAAA,IAAI,CAAC,YAAA;gBACL,IAAI,CAAC,cAAc,EAAE;oBACpB,OAAO;AACP,iBAAA;;gBAGD,IAAI,CAAC,sBAAsB,EAAE;AAC5B,oBAAA,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC;yBACpC,IAAI,CAAC,UAAA,KAAK,EAAA;AACV,wBAAA,IAAI,KAAK,EAAE;4BACV,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACjE,4BAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACrD,yBAAA;AACF,qBAAC,CAAC;yBACD,KAAK,CAAC,UAAC,GAAW,EAAA;AAClB,wBAAA,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;AAC5C,qBAAC,CAAC,CAAC;oBAEJ,OAAO;AACP,iBAAA;;AAGD,gBAAA,aAAa,CAAC,cAAc,CAAC,GAAG,CAAC;AAC/B,qBAAA,IAAI,CAAC,YAAA;AACL,oBAAA,IAAI,cAAc,EAAE;wBACnB,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;AACjE,wBAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACrD,qBAAA;AACF,iBAAC,CAAC;qBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,oBAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,iBAAC,CAAC,CAAC;AAEL,aAAC,CAAC;iBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,gBAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,aAAC,CAAC,CAAC;AACL,SAAC,CAAC;aACD,KAAK,CAAC,UAAC,GAAW,EAAA;AAClB,YAAA,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;AAC5C,SAAC,CAAC,CAAC;QAEJ,OAAO;AACP,KAAA;AAED,IAAA,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAC7B,SAAA,IAAI,CAAC,YAAA;QACL,eAAe;aACb,UAAU,CAAC,SAAS,GAAG,qBAAqB,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;AAClG,aAAA,IAAI,CAAC,YAAA;YACL,IAAI,CAAC,cAAc,EAAE;gBACpB,OAAO;AACP,aAAA;;YAGD,IAAI,CAAC,sBAAsB,EAAE;AAC5B,gBAAA,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC;qBACpC,IAAI,CAAC,UAAA,KAAK,EAAA;AACV,oBAAA,IAAI,KAAK,EAAE;wBACV,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACjE,wBAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACrD,qBAAA;AACF,iBAAC,CAAC;qBACD,KAAK,CAAC,UAAC,GAAW,EAAA;AAClB,oBAAA,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;AAC5C,iBAAC,CAAC,CAAC;gBAEJ,OAAO;AACP,aAAA;;AAGD,YAAA,aAAa,CAAC,cAAc,CAAC,GAAG,CAAC;iBAC/B,IAAI,CAAC,UAAA,KAAK,EAAA;AACV,gBAAA,IAAI,KAAK,EAAE;oBACV,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACjE,oBAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACrD,iBAAA;AACF,aAAC,CAAC;iBACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,gBAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,aAAC,CAAC,CAAC;AAEL,SAAC,CAAC;aACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,YAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,SAAC,CAAC,CAAC;AACL,KAAC,CAAC;SACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,QAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,KAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,EAAE,UAAC,SAAoB,EAAA;AAChE,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;;AAGrC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;IAED,IAAM,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;;IAGvC,IAAI,CAAC,QAAQ,EAAE;QACd,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;aAClC,IAAI,CAAC,UAAA,KAAK,EAAA;AACV,YAAA,IAAI,KAAK,EAAE;gBACV,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;;AAEjE,aAAA;AACF,SAAC,CAAC;aACD,KAAK,CAAC,UAAC,GAAW,EAAA;AAClB,YAAA,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;AAC5C,SAAC,CAAC,CAAC;QACJ,OAAO;AACP,KAAA;;AAGD,IAAA,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;SAC7B,IAAI,CAAC,UAAC,MAAkB,EAAA;QACxB,UAAU,GAAG,eAAe,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;;AAEnE,KAAC,CAAC;SACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,QAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,KAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,0BAA0B,EAAE,YAAA;;AAElD,IAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;AAC3C,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,iBAAiB,EAAE,YAAA;;AAEzC,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;AAED,IAAA,IAAI,SAAS,CAAC,CAAC,CAAC,YAAY,UAAU,EAAE;QACvC,OAAO;AACP,KAAA;;;IAKD,eAAe,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3C,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,EAAE,YAAA;;AAE3C,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;AAED,IAAA,IAAI,SAAS,CAAC,CAAC,CAAC,YAAY,UAAU,EAAE;QACvC,OAAO;AACP,KAAA;;;IAKD,eAAe,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,mCAAmC,EAAE,UAAC,SAAoB,EAAA;;AAGhF,IAAA,eAAe,CAAC,UAAU,CAAC,SAAS,GAAG,qBAAqB,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;SACtF,IAAI,CAAC,UAAA,MAAM,EAAA;;AAGX,QAAA,eAAe,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;QAE7C,UAAU,GAAG,SAAS,CAAC,gBAAgB,GAAG,eAAe,CAAC,eAAe,CAAC,SAAS,CAAC,gBAAgB,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;QAC/H,QAAQ,CAAC,MAAM,EAAE;AACf,aAAA,IAAI,CAAC,YAAA;AACL,YAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACtD,SAAC,CAAC;aACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,YAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,SAAC,CAAC,CAAC;AACL,KAAC,CAAC;SACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,QAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACpB,KAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,6BAA6B,EAAE,YAAA;IACrD,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,QAAA,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;IAEpD,eAAe,CAAC,cAAc,EAAE,CAAC;IACjC,QAAQ,CAAC,MAAM,EAAE;AACf,SAAA,IAAI,CAAC,YAAA;AACL,QAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACtD,KAAC,CAAC;SACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,QAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,KAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,4BAA4B,EAAE,YAAA;IACpD,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,QAAA,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;IAEnD,eAAe,CAAC,aAAa,EAAE,CAAC;IAChC,QAAQ,CAAC,MAAM,EAAE;AACf,SAAA,IAAI,CAAC,YAAA;AACL,QAAA,QAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACtD,KAAC,CAAC;SACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,QAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,KAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,0BAA0B,EAAE,UAAC,SAAoB,EAAA;IACvE,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,QAAA,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;AAEzD,IAAA,IAAM,SAAS,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,wCAAwC,EAAE,SAAS,CAAC,CAAC;IAE7F,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,wCAAwC,EAAE,SAAS,CAAC,CAAC;AAE1E,IAAA,eAAe,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;IACxC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACnB,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,0BAA0B,EAAE,UAAC,SAAoB,EAAA;IACvE,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,QAAA,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAEjD,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,0CAA0C,EAAE,CAAC,WAAW,CAAC,CAAC;AAChF,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,iCAAiC,EAAE,UAAC,SAAoB,EAAA;IAC9E,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,QAAA,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;AAE3D,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;;IAGD,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAClC,SAAA,IAAI,CAAC,YAAA;QACL,eAAe;aACb,UAAU,CAAC,SAAS,GAAG,qBAAqB,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC,CAAC;AAC9G,aAAA,IAAI,CAAC,YAAA;;AAEN,SAAC,CAAC;aACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,YAAA,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;AAClD,SAAC,CAAC,CAAC;AACL,KAAC,CAAC;SACD,KAAK,CAAC,UAAC,GAAW,EAAA;AAClB,QAAA,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;AAC5C,KAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,2BAA2B,EAAE,YAAA;AACnD,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;AAED,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;QACvB,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,YAAA,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACpF,OAAO;AACP,KAAA;AAED,IAAA,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACnC,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAuB,EAAE,YAAA;AAC/C,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;AAED,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;QACvB,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,YAAA,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACpF,OAAO;AACP,KAAA;AAED,IAAA,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAC7C,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,+BAA+B,EAAE,UAAC,SAAoB,EAAA;AAC5E,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;QAClB,OAAO;AACP,KAAA;AAED,IAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;QACvB,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,YAAA,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACpF,OAAO;AACP,KAAA;IAED,IAAI,SAAS,CAAC,IAAI,EAAE;QACnB,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AAC7E,KAAA;AAAM,SAAA;AACN,QAAA,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAC5C,KAAA;AACF,CAAC,CAAC,CAAC;AAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,sBAAsB,EAAE,UAAC,SAAoB,EAAA;AACnE,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AAErC,IAAA,IAAI,SAAS,CAAC,CAAC,CAAC,YAAY,UAAU,EAAE;AACvC,QAAA,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;AAClD,KAAA;AAAM,SAAA;AACN,QAAA,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC,CAAC;AAC7E,KAAA;IAED,QAAQ,CAAC,MAAM,EAAE,CAAC;AACnB,CAAC,CAAC,CAAC;AAEH,IAAA,OAAA,kBAAA,YAAA;IAiBC,SAAY,OAAA,CAAA,IAAY,EAAE,GAAiB,EAAA;;AAE1C,QAAA,IAAM,UAAU,GAAG,IAAI,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,aAAa,CAAC,CAAC;AACxF,QAAA,IAAM,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAEtD,IAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AAErE,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,SAAS,CAAC;AAClC,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;AACnB,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,QAAQ,IAAI,KAAK,CAAC;QACtC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,IAAI,KAAK,CAAC;QACpC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,UAAU,IAAI,KAAK,CAAC;AAC1C,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,WAAW,CAAC;AACxC,QAAA,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC;AACzB,QAAA,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;AACtB,QAAA,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;AACvB,QAAA,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,QAAQ,GAAG,YAAY,GAAG,KAAK,CAAC;KACxD;IACF,OAAC,OAAA,CAAA;AAAD,CAAC,EAAA,CAAA,CAAA;AAED,IAAA,UAAA,kBAAA,YAAA;AAgBC,IAAA,SAAA,UAAA,CAAY,IAAY,EAAE,MAAqB,EAAE,OAAe,EAAA;AAC/D,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;AACtB,QAAA,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;AACd,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AACtB,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,gBAAgB,GAAG,wBAAwB,CAAC,IAAI,CAAC;AACtD,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,WAAW,CAAC;AACpC,QAAA,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC;AACzB,QAAA,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;AACtB,QAAA,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;AACvB,QAAA,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;KAChC;IAED,UAAQ,CAAA,SAAA,CAAA,QAAA,GAAR,UAAS,OAAgB,EAAA;AACxB,QAAA,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC5B,CAAA;IACF,OAAC,UAAA,CAAA;AAAD,CAAC,EAAA,CAAA,CAAA;AAED,IAAA,eAAA,kBAAA,YAAA;AAOC,IAAA,SAAA,eAAA,GAAA;AACC,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,WAAW,GAAG,cAAc,IAAI,EAAE,CAAC;AAExC,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM;AACpC,aAAA,GAAG,CAAC,wCAAwC,EAAE,SAAS,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;KAC/B;AAED,IAAA,eAAA,CAAA,SAAA,CAAA,QAAQ,GAAR,UAAS,YAAqC,EAAE,UAAoB,EAAA;QAApE,IA+FC,KAAA,GAAA,IAAA,CAAA;;AA7FA,QAAA,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YAC5B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,UAAA,IAAI,EAAA;AAC9C,gBAAA,OAAO,YAAY,CAAC,IAAI,CAAC,UAAA,GAAG,EAAI,EAAA,OAAA,GAAG,CAAC,IAAI,KAAK,IAAI,CAAjB,EAAiB,CAAC,CAAC;AACpD,aAAC,CAAC,CAAC;AACH,SAAA;;QAGD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,CAAC,EAAE,IAAI,EAAA;YACpC,IAAM,WAAW,GAAG,YAAY,CAAC,KAAK,CAAC,UAAA,GAAG,EAAI,EAAA,OAAA,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,CAApB,EAAoB,CAAC,CAAC;AACpE,YAAA,IAAI,WAAW,EAAE;;AAEhB,gBAAA,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;gBAElB,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AACtE,aAAA;AACF,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,CAAC,EAAE,IAAI,EAAA;YACzC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,EAAE,EAAE,KAAK,EAAA;gBACxC,IAAM,WAAW,GAAG,YAAY,CAAC,KAAK,CAAC,UAAA,GAAG,EAAI,EAAA,OAAA,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,CAArB,EAAqB,CAAC,CAAC;AACrE,gBAAA,IAAI,WAAW,EAAE;AAChB,oBAAA,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;AAGpB,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE;AAC5B,wBAAA,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAClB,qBAAA;AACD,iBAAA;AACF,aAAC,CAAC,CAAC;AACJ,SAAC,CAAC,CAAC;;AAGH,QAAA,YAAY,CAAC,OAAO,CAAC,UAAA,GAAG,EAAA;;YAEvB,IAAI,GAAG,CAAC,UAAU,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;gBAChC,OAAO;AACP,aAAA;;YAGD,IAAM,qBAAqB,GAAG,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,GAAG,CAAC,IAAI,CAAjB,EAAiB,CAAC,CAAC;;YAGhF,IAAI,qBAAqB,IAAI,UAAU,EAAE;;AAExC,gBAAA,IAAM,QAAQ,GAAG,KAAI,CAAC,WAAW;AAC/B,qBAAA,SAAS,CAAC,UAAA,IAAI,EAAA,EAAI,OAAA,IAAI,KAAK,UAAU,CAAC,IAAI,CAAxB,EAAwB,CAAC,CAAC;AAC9C,gBAAA,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;AACnD,aAAA;AAAM,iBAAA,IAAI,qBAAqB,EAAE;gBACjC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAChC,aAAA;;YAGD,IAAM,QAAQ,GAAG,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,UAAA,IAAI,EAAA,EAAI,OAAA,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,CAAA,EAAA,CAAC,CAAC;;AAGpE,YAAA,IAAI,QAAQ,EAAE;AACb,gBAAA,IAAM,OAAO,GAAG,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,UAAU,CAAC,CAAC;gBAEtD,IAAM,OAAO,GAAG,IAAI,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;AAE1C,gBAAA,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAG7B,gBAAA,IAAM,WAAS,GAAG,GAAG,CAAC,MAAM,IAAI,WAAW,CAAC;gBAC5C,IAAM,MAAM,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,MAAM,KAAK,WAAS,CAA1B,EAA0B,CAAC,CAAC;AAE3E,gBAAA,IAAI,MAAM,EAAE;oBACX,IAAM,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAA,KAAK,EAAA,EAAI,OAAA,KAAK,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,CAAA,EAAA,CAAC,CAAC;oBAC7E,IAAI,UAAU,GAAG,CAAC,EAAE;AACnB,wBAAA,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;AAC5C,qBAAA;AACD,iBAAA;AAAM,qBAAA;oBACN,IAAM,aAAa,GAAG,WAAS;yBAC7B,KAAK,CAAC,GAAG,CAAC;yBACV,GAAG,CAAC,UAAC,CAAC,EAAA,EAAK,OAAA,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAA1C,EAA0C,CAAC;yBACtD,IAAI,CAAC,GAAG,CAAC,CAAC;oBAEZ,IAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AAErE,oBAAA,IAAM,SAAS,GAAG,IAAI,UAAU,CAC/B,WAAW,CAAC,WAAqC,CAAC,IAAI,aAAa,EACnE,GAAG,CAAC,MAAM,EACV,OAAO,CACP,CAAC;AAEF,oBAAA,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;AAC/C,oBAAA,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAClC,iBAAA;AACD,aAAA;AACF,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,6CAA6C,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAE3F,IAAI,CAAC,SAAS,EAAE,CAAC;KACjB,CAAA;AAED,IAAA,eAAA,CAAA,SAAA,CAAA,UAAU,GAAV,UAAW,UAAkB,EAAE,IAAc,EAAE,OAAc,EAAA;AAAd,QAAA,IAAA,OAAA,KAAA,KAAA,CAAA,EAAA,EAAA,OAAc,GAAA,IAAA,CAAA,EAAA;AAC5D,QAAA,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAA;YAClC,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,WAAW,GAAG,EAAE,CAAC;AAErB,YAAA,IAAM,OAAO,GAAG,IAAI,OAAO,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AAExD,YAAA,OAAO,CAAC,QAAQ,CAAC,UAAA,IAAI,EAAA;gBACpB,SAAS,IAAI,IAAI,CAAC;AACnB,aAAC,CAAC,CAAC;AAEH,YAAA,OAAO,CAAC,QAAQ,CAAC,UAAA,IAAI,EAAA;gBACpB,WAAW,IAAI,IAAI,CAAC;AACrB,aAAC,CAAC,CAAC;YAEH,IAAM,SAAS,GAAG,UAAU,CAAC,YAAA;;gBAE5B,MAAM,CAAC,iDAAiD,CAAC,CAAC;gBAC1D,OAAO,CAAC,SAAS,EAAE,CAAC;aACpB,EAAE,OAAO,CAAC,CAAC;AAEZ,YAAA,OAAO,CAAC,SAAS,CAAC,UAAA,MAAM,EAAA;gBACvB,YAAY,CAAC,SAAS,CAAC,CAAC;gBAExB,IAAI,WAAW,CAAC,MAAM,EAAE;AACvB,oBAAA,MAAM,CAAC,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;AAC/B,iBAAA;AAAM,qBAAA;oBACN,OAAO,CAAC,SAAS,CAAC,CAAC;AACnB,iBAAA;AACF,aAAC,CAAC,CAAC;YAEH,OAAO,CAAC,KAAK,EAAE,CAAC;AACjB,SAAC,CAAC,CAAC;KACH,CAAA;IAED,eAAQ,CAAA,SAAA,CAAA,QAAA,GAAR,UAAS,MAAkB,EAAA;AAC1B,QAAA,IAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAE1D,QAAA,IAAI,OAAO,EAAE;YACZ,OAAO,CAAC,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC;AAC1C,SAAA;KACD,CAAA;IAED,eAAQ,CAAA,SAAA,CAAA,QAAA,GAAR,UAAS,GAAW,EAAA;QACnB,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;KAC/B,CAAA;IAED,eAAY,CAAA,SAAA,CAAA,YAAA,GAAZ,UAAa,GAAY,EAAA;QAAzB,IAOC,KAAA,GAAA,IAAA,CAAA;AANA,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,aAAa;AACjC,aAAA,MAAM,CAAC,UAAA,GAAG,EAAA,EAAI,OAAA,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,CAAA,EAAA,CAAC;aAClC,KAAK,CAAC,UAAA,GAAG,EAAA;YACT,IAAM,QAAQ,GAAG,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACxC,OAAO,QAAQ,KAAK,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC5C,SAAC,CAAC,CAAC;KACJ,CAAA;IAED,eAAiB,CAAA,SAAA,CAAA,iBAAA,GAAjB,UAAkB,GAAY,EAAA;QAA9B,IA4BC,KAAA,GAAA,IAAA,CAAA;QA3BA,IAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;AACvE,QAAA,IAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa;aAC9C,MAAM,CAAC,UAAA,GAAG,EAAA;;YAEV,OAAO,GAAG,CAAC,QAAQ,KAAK,GAAG,CAAC,QAAQ,IAAI,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC3F,SAAC,CAAC,CAAC;QAEJ,IAAM,cAAc,GAAa,EAAE,CAAC;AACpC,QAAA,WAAW,CAAC,KAAK,CAAC,UAAC,GAAG,EAAE,CAAC,EAAA;AACxB,YAAA,IAAM,SAAS,GAAG,WAAW,CAAC,KAAK,CAAC,UAAC,IAAI,EAAA;gBACxC,IAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;AACzE,gBAAA,OAAO,YAAY,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC;AAChC,aAAC,CAAC,CAAC;YAEH,IAAI,CAAC,SAAS,EAAE;AACf,gBAAA,OAAO,KAAK,CAAC;AACb,aAAA;AAED,YAAA,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACzB,YAAA,OAAO,IAAI,CAAC;AACb,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE;AAChC,YAAA,OAAO,GAAG,CAAC;AACX,SAAA;AAED,QAAA,OAAO,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAChC,CAAA;AAED,IAAA,eAAA,CAAA,SAAA,CAAA,OAAO,GAAP,UAAQ,GAAY,EAAE,QAAgB,EAAA;;AAErC,QAAA,IAAM,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;AACpB,QAAA,IAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;;QAGtB,IAAM,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,GAAG,KAAK,GAAG,CAAhB,EAAgB,CAAC,CAAC;AACzE,QAAA,IAAM,WAAW,GAAG,aAAa,GAAG,QAAQ,CAAC;QAE7C,IAAI,WAAW,GAAG,CAAC,IAAI,WAAW,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YAC5D,OAAO;AACP,SAAA;;QAGD,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;QAC/C,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;;AAG3C,QAAA,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAC/D,IAAI;aACF,MAAM,CAAC,UAAC,GAAG,EAAE,CAAC,EAAE,IAAI,IAAK,OAAA,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAvB,EAAuB,CAAC;aACjD,OAAO,CAAC,UAAC,GAAG,EAAA;;YAEZ,IAAI,GAAG,KAAK,cAAc,EAAE;gBAC3B,OAAO;AACP,aAAA;YAED,IAAM,UAAU,GAAG,GAAoB,CAAC;AAExC,YAAA,IAAM,MAAM,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC;AACpC,YAAA,IAAM,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;;AAGlC,YAAA,MAAM,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC;;AAE5B,YAAA,QAAQ,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC;AAC/B,SAAC,CAAC,CAAC;;AAGJ,QAAA,IAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;AACvD,QAAA,IAAM,OAAO,GAAG,SAAS,GAAG,QAAQ,CAAC;QAErC,IAAI,OAAO,GAAG,CAAC,IAAI,OAAO,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YACtD,OAAO;AACP,SAAA;AAED,QAAA,IAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,6CAA6C,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;;AAG3F,QAAA,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;AAC/D,aAAA,IAAI,CAAC,YAAA;YACL,uBAAuB,GAAG,KAAK,CAAC;YAChC,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1C,SAAC,CAAC;aACD,KAAK,CAAC,UAAA,GAAG,EAAA;AACT,YAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACpB,SAAC,CAAC,CAAC;KACJ,CAAA;IAED,eAAoB,CAAA,SAAA,CAAA,oBAAA,GAApB,UAAqB,MAAc,EAAA;QAClC,IAAM,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACtC,IAAM,aAAa,GAAa,EAAE,CAAC;QAEnC,IAAI,YAAY,GAAG,KAAK,CAAC;AACzB,QAAA,UAAU,CAAC,KAAK,CAAC,UAAC,QAAgB,EAAA;AACjC,YAAA,IAAI,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,EAAE;gBAC5B,YAAY,GAAG,IAAI,CAAC;AACpB,gBAAA,OAAO,IAAI,CAAC;AACZ,aAAA;;AAGD,YAAA,IAAI,YAAY,IAAI,QAAQ,CAAC,IAAI,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE;gBACvE,YAAY,GAAG,KAAK,CAAC;AACrB,gBAAA,OAAO,KAAK,CAAC;AACb,aAAA;AAED,YAAA,IAAI,YAAY,EAAE;gBACjB,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;AACpC,aAAA;AAED,YAAA,OAAO,IAAI,CAAC;AACb,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,EAAA;;YAE1B,IAAM,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,UAAA,IAAI,EAAA;gBAC5B,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACxC,IAAI,UAAU,GAAG,EAAE,CAAC;gBACpB,IAAM,OAAO,GAAG,eAAe,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;gBAEvD,IAAI,CAAC,OAAO,EAAE;AACb,oBAAA,OAAO,QAAQ,CAAC;AAChB,iBAAA;gBAED,IAAM,QAAQ,GAAG,eAAe,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;AAEvD,gBAAA,IAAI,QAAQ,EAAE;AACb,oBAAA,OAAO,QAAQ,CAAC;AAChB,iBAAA;gBAED,IAAM,cAAc,GAAG,eAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;gBAClE,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;gBAE/F,IAAI,UAAU,CAAC,MAAM,EAAE;AACtB,oBAAA,QAAQ,IAAI,KAAK,GAAG,UAAU,CAAC;AAC/B,iBAAA;AAED,gBAAA,OAAO,QAAQ,CAAC;AACjB,aAAC,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;AAC1B,gBAAA,OAAO,CAAC,CAAC;AACT,aAAA;YAED,IAAI,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;AACxC,gBAAA,OAAO,CAAC,CAAC;AACT,aAAA;YAED,QACC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC/B,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAC9B;AACH,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,6CAA6C,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAE3F,IAAI,CAAC,SAAS,EAAE,CAAC;KACjB,CAAA;AAED,IAAA,eAAA,CAAA,SAAA,CAAA,cAAc,GAAd,YAAA;QACC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,EAAA;YAC1B,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACnE,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,6CAA6C,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAE3F,IAAI,CAAC,SAAS,EAAE,CAAC;KACjB,CAAA;AAED,IAAA,eAAA,CAAA,SAAA,CAAA,aAAa,GAAb,YAAA;QACC,IAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,UAAA,IAAI,EAAA;AAC7C,YAAA,OAAO,eAAe,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAC/C,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,EAAA;YAC1B,IAAM,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC,UAAA,IAAI,EAAA,EAAI,OAAA,CAAA,IAAI,KAAJ,IAAA,IAAA,IAAI,KAAJ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,IAAI,CAAE,IAAI,MAAK,CAAC,CAAA,EAAA,CAAC,CAAC;YAC7D,IAAM,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC,UAAA,IAAI,EAAA,EAAI,OAAA,CAAA,IAAI,KAAJ,IAAA,IAAA,IAAI,KAAJ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,IAAI,CAAE,IAAI,MAAK,CAAC,CAAA,EAAA,CAAC,CAAC;AAE7D,YAAA,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,EAAE;AAC3B,gBAAA,OAAO,CAAC,CAAC;AACT,aAAA;YAED,OAAO,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACvD,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,6CAA6C,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAE3F,IAAI,CAAC,SAAS,EAAE,CAAC;KACjB,CAAA;IAED,eAAY,CAAA,SAAA,CAAA,YAAA,GAAZ,UAAa,SAAkB,EAAA;;AAE9B,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAE3B,IAAI,CAAC,SAAS,EAAE,CAAC;KACjB,CAAA;IAED,eAAc,CAAA,SAAA,CAAA,cAAA,GAAd,UAAe,WAAoB,EAAA;;AAElC,QAAA,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAE/B,IAAI,CAAC,SAAS,EAAE,CAAC;KACjB,CAAA;AAED,IAAA,eAAA,CAAA,SAAA,CAAA,aAAa,GAAb,UAAc,CAAU,EAAE,CAAU,EAAA;AACnC,QAAA,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE;AAC/C,YAAA,OAAO,CAAC,CAAC;AACT,SAAA;QACD,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;KACvF,CAAA;AAED,IAAA,eAAA,CAAA,SAAA,CAAA,SAAS,GAAT,YAAA;QAAA,IAmDC,KAAA,GAAA,IAAA,CAAA;;AAjDA,QAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;QAGnD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,EAAA;YAC3B,OAAO,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACrC,SAAC,CAAC,CAAC;;AAGH,QAAA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAA,IAAI,EAAA;AAC7B,YAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC;AACnD,SAAC,CAAC,CAAC;;AAGH,QAAA,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,CAAC,EAAA;YAC7B,IAAI,MAAM,KAAK,CAAC,EAAE;AACjB,gBAAA,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,QAAQ,GAAG,aAAa,GAAG,MAAM,CAAC;AACzD,aAAA;iBAAM,IAAI,CAAC,KAAK,CAAC,EAAE;AACnB,gBAAA,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,QAAQ,GAAG,cAAc,GAAG,OAAO,CAAC;AAC3D,aAAA;AAAM,iBAAA,IAAI,CAAC,KAAK,MAAM,GAAG,CAAC,EAAE;AAC5B,gBAAA,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,QAAQ,GAAG,aAAa,GAAG,MAAM,CAAC;AACzD,aAAA;AAAM,iBAAA;AACN,gBAAA,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,QAAQ,GAAG,YAAY,GAAG,KAAK,CAAC;AACvD,aAAA;AACF,SAAC,CAAC,CAAC;;QAIH,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,gBAAA,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAEtD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,EAAA;gBACxB,OAAO,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACrC,aAAC,CAAC,CAAC;AACH,SAAA;AAED,QAAA,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,SAAS,EAAE;YACvC,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,gBAAA,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;YAE9D,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,EAAA;gBAC3B,OAAO,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACrC,aAAC,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAA,IAAI,EAAA;gBAC7B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,EAAA;oBACvB,OAAO,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACrC,iBAAC,CAAC,CAAC;AACJ,aAAC,CAAC,CAAC;AACH,SAAA;KACD,CAAA;IAED,eAAe,CAAA,SAAA,CAAA,eAAA,GAAf,UAAgB,GAAW,EAAA;QAC1B,IAAI,IAAI,CAAC,WAAW,EAAE;AACrB,YAAA,IAAI,cAAiC,CAAC;AACtC,YAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAA,IAAI,EAAA;gBAC1B,cAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAA,KAAK,EAAA;AACtC,oBAAA,OAAO,KAAK,CAAC,GAAG,KAAK,GAAG,CAAC;AAC1B,iBAAC,CAAC,CAAC;gBAEH,OAAO,CAAC,CAAC,cAAY,CAAC;AACvB,aAAC,CAAC,CAAC;AAEH,YAAA,OAAO,cAAY,CAAC;AACpB,SAAA;AAED,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAA,IAAI,EAAA;AAC9B,YAAA,OAAO,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC;AACzB,SAAC,CAAC,CAAC;KAEH,CAAA;IAED,eAAgB,CAAA,SAAA,CAAA,gBAAA,GAAhB,UAAiB,IAAY,EAAA;QAC5B,IAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAA,IAAI,EAAA;AACvC,YAAA,OAAO,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC;AAC3B,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,OAAO,EAAE;AACZ,YAAA,OAAO,OAAO,CAAC;AACf,SAAA;QAED,IAAI,YAAY,GAAG,SAAS,CAAC;AAC7B,QAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAA,IAAI,EAAA;YACvB,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAA,KAAK,EAAA;AACtC,gBAAA,OAAO,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC;AAC5B,aAAC,CAAC,CAAC;YAEH,OAAO,CAAC,CAAC,YAAY,CAAC;AACvB,SAAC,CAAC,CAAC;AAEH,QAAA,OAAO,YAAY,CAAC;KACpB,CAAA;IAED,eAAiB,CAAA,SAAA,CAAA,iBAAA,GAAjB,UAAkB,MAAc,EAAA;AAC/B,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAC,MAAkB,EAAA,EAAK,OAAA,MAAM,CAAC,MAAM,KAAK,MAAM,CAAxB,EAAwB,CAAC,CAAC;KAChF,CAAA;IAED,eAAW,CAAA,SAAA,CAAA,WAAA,GAAX,UAAY,OAA6B,EAAA;;QAExC,IAAI,CAAC,OAAO,EAAE;YACb,IAAI,IAAI,CAAC,WAAW,EAAE;gBACrB,OAAO,IAAI,CAAC,YAAY,CAAC;AACzB,aAAA;AAAM,iBAAA;gBACN,OAAO,IAAI,CAAC,SAAS,CAAC;AACtB,aAAA;AACD,SAAA;AACI,aAAA;YACJ,OAAO,OAAO,CAAC,QAAQ,CAAC;AACxB,SAAA;KACD,CAAA;IAED,eAAS,CAAA,SAAA,CAAA,SAAA,GAAT,UAAU,OAA6B,EAAA;;QAGtC,IAAI,IAAI,CAAC,SAAS,EAAE;AAAE,YAAA,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAE/C,IAAI,OAAO,KAAK,IAAI,EAAE;AACrB,YAAA,OAAO,IAAI,CAAC;AACZ,SAAA;QAED,OAAO,OAAO,CAAC,MAAM,CAAC;KACtB,CAAA;IAED,eAAW,CAAA,SAAA,CAAA,WAAA,GAAX,UAAY,OAA6B,EAAA;;AAExC,QAAA,IAAI,IAAc,CAAC;QAEnB,IAAI,OAAO,YAAY,UAAU,EAAE;YAClC,IAAI,GAAG,IAAI,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAElC,IAAI,CAAC,eAAe,GAAG,cAAc,GAAG,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,GAAG,EAAE,CAAC;AACjF,YAAA,IAAI,CAAC,gBAAgB,GAAG,wBAAwB,CAAC,QAAQ,CAAC;AAC1D,YAAA,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,YAAA,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;AACzC,YAAA,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC;AACjC,YAAA,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,SAAS,GAAG,aAAa,GAAG,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,MAAM,KAAK,WAAW,GAAG,gBAAgB,GAAG,kBAAkB,CAAC;AAC5I,SAAA;AACI,aAAA;AACJ,YAAA,IAAI,MAAI,GAAG,OAAO,CAAC,IAAI,CAAC;YACxB,IAAI,aAAW,GAAG,EAAE,CAAC;YAErB,IAAI,OAAO,CAAC,OAAO,EAAE;AACpB,gBAAA,QAAQ,qBAAqB;AAC7B,oBAAA,KAAK,OAAO;wBACX,MAAM;AACP,oBAAA,KAAK,gBAAgB;wBACpB,aAAW,GAAG,CAAC,aAAa,IAAI,IAAI,IAAI,GAAG,GAAG,aAAW,CAAC;wBAC1D,MAAM;AACP,oBAAA,KAAK,iBAAiB,CAAC;AACvB,oBAAA;wBACC,MAAI,GAAG,CAAC,aAAa,IAAI,IAAI,IAAI,GAAG,GAAG,MAAI,CAAC;wBAC5C,MAAM;AACN,iBAAA;AACD,aAAA;AAED,YAAA,IAAI,GAAG,IAAI,QAAQ,CAAC,MAAI,CAAC,CAAC;;YAG1B,IAAI,UAAU,GAAG,EAAE,CAAC;YACpB,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;;AAG5C,YAAA,IAAI,sBAAsB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;gBACjD,IAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;AAC3E,gBAAA,UAAU,GAAG,SAAS,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AAC5D,gBAAA,aAAW,IAAI,IAAI,GAAG,UAAU,CAAC;AACjC,aAAA;;YAGD,IAAI,CAAC,QAAQ,EAAE;gBACd,IAAM,cAAc,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;gBACvD,IAAM,eAAe,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;qBACvG,KAAK,CAAC,GAAG,CAAC;AACV,qBAAA,OAAO,EAAE,CAAC;gBAEZ,eAAe;qBACb,MAAM,CAAC,UAAA,GAAG,EAAI,EAAA,OAAA,GAAG,CAAC,MAAM,CAAV,EAAU,CAAC;AACzB,qBAAA,OAAO,CAAC,UAAC,GAAG,EAAE,CAAC,EAAA;oBACf,IAAI,CAAC,KAAK,CAAC,EAAE;wBACZ,aAAW,GAAG,EAAE,CAAC;AACjB,qBAAA;AAED,oBAAA,aAAW,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,CAAC;AACjC,iBAAC,CAAC,CAAC;AACJ,aAAA;YAED,IAAI,OAAO,CAAC,SAAS,EAAE;gBACtB,IAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAC3C,gBAAA,aAAW,GAAG,IAAI,GAAG,WAAW,GAAG,KAAK,CAAC;AACzC,aAAA;iBAAM,IAAI,OAAO,CAAC,QAAQ,EAAE;AAC5B,gBAAA,aAAW,GAAG,IAAI,GAAG,aAAW,CAAC;AACjC,aAAA;AAED,YAAA,IAAI,CAAC,eAAe,GAAG,aAAW,CAAC;AACnC,YAAA,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC;AAC5B,YAAA,IAAI,CAAC,OAAO,GAAG,0BAA0B,CAAC;AAC1C,YAAA,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;AACzC,YAAA,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC;AAC9B,YAAA,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,SAAS,GAAG,aAAa,GAAG,OAAO,CAAC,SAAS,GAAG,kBAAkB,CAAC;AACxF,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;KACZ,CAAA;IACF,OAAC,eAAA,CAAA;AAAD,CAAC,EAAA,CAAA;;"}